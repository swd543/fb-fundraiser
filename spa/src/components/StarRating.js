import React from 'react'
import './StarRating.css'
import PropTypes from 'prop-types'
import { uniqueId } from 'lodash'

const defaultStyle={
  'progress':{
    backgroundColor:'orange'
  },
  'width':40
}

const StarRating = props => {
  const {style=defaultStyle, fillPercent=75, title='Rating', label='Quality rating from Charity Navigator'} = props
  const linearGradientId = uniqueId("lg")
  const linearGradient=(
    <linearGradient id={linearGradientId} x1="0.5" y1="1" x2="0.5" y2="0">
      <stop offset="0%" stopOpacity="1" stopColor="orange" />
      <stop offset={`${fillPercent}%`} stopOpacity="1" stopColor={style.progress.backgroundColor} />
      <stop offset={`${fillPercent}%`} stopOpacity="0" stopColor={style.progress.backgroundColor} />
      <stop offset="100%" stopOpacity="0" stopColor="orange" />
    </linearGradient>
  )
  return (
    <div style={{display:'inline-flex', flexDirection:'column', alignItems:'center', margin:10}}>
      <svg viewBox="-2 -2 136 136" width={style.width}>
        <title>{title} is {fillPercent}%</title>
        <defs
          id="defs64" />
        {linearGradient}
        <rect
          id="rect91"
          width="127.14389"
          height="126.92943"
          x="2.6213696"
          y="2.7019184"
          ry="9.9181929"
          fill={`url(#${linearGradientId})`}/>
        <path
          d="m 5.3425851,28.3197 c 0,-18.860613 -0.037726,-18.3903571 1.6318258,-20.3408529 0.4646518,-0.542841 1.4553405,-1.3251395 2.2015303,-1.738441 L 10.53265,5.4889489 34.648423,5.4206821 58.764196,5.3524153 57.486866,7.9524211 c -0.702533,1.4300031 -4.149295,8.7402409 -7.65947,16.2449729 -4.499354,9.619582 -6.56886,13.781888 -7.015074,14.10909 -0.489003,0.358577 -4.403948,1.04236 -17.215825,3.006903 C 9.5211,43.778351 7.2204605,44.213777 6.2030782,44.983857 5.9386754,45.18399 5.6368997,45.351356 5.5324655,45.355787 5.4280313,45.360215 5.3425851,37.693975 5.3425851,28.3197 Z"
          id="path936" />
        <path
          d="m 126.10653,45.110631 c -0.34811,-0.272317 -1.14561,-0.668007 -1.77221,-0.879316 -0.62661,-0.211307 -8.60159,-1.522628 -17.72218,-2.914047 C 97.491554,39.925847 89.762163,38.647106 89.435718,38.475622 88.696878,38.087501 89.025553,38.745373 80.922366,21.435353 77.207803,13.500304 73.951679,6.6355111 73.686537,6.1802562 L 73.204459,5.35252 97.566812,5.420734 121.92916,5.488948 123.0156,6.0690645 c 1.57941,0.8433476 2.99442,2.423847 3.58627,4.0056895 0.50225,1.342401 0.51736,1.881459 0.51736,18.462516 0,9.393857 -0.0855,17.077206 -0.18988,17.07411 -0.10444,-0.0031 -0.4747,-0.228434 -0.82282,-0.500749 z"
          id="path938" />
        <path
          d="m 107.77479,125.2478 c 1.43361,-2.84844 1.47122,-2.37297 -1.76083,-22.26121 -2.49735,-15.367295 -2.87359,-18.053807 -2.61516,-18.67355 0.27264,-0.653844 4.94234,-5.553688 18.96389,-19.898482 l 4.76437,-4.874213 -0.0672,31.077711 -0.0672,31.077714 -0.75145,1.35671 c -0.41331,0.74619 -1.1956,1.73687 -1.73845,2.20153 -1.77703,1.52107 -2.48456,1.63182 -10.42454,1.63182 h -7.12783 z"
          id="path940" />
        <path
          d="m 40.786931,126.64997 c 0.208868,-0.12125 5.848317,-3.25855 12.532107,-6.97178 10.166819,-5.64826 12.276443,-6.73101 12.911869,-6.62696 0.592587,0.097 24.658469,13.21788 25.155495,13.7149 0.06584,0.0658 -11.377561,0.11624 -25.429766,0.112 -14.631679,-0.004 -25.387187,-0.1019 -25.169705,-0.22816 z"
          id="path942" />
        <path
          d="M 9.6465413,126.36007 C 8.2601952,125.73383 6.7550226,124.32436 6.0173607,122.96164 L 5.469172,121.94894 5.4019233,90.935402 5.3346745,59.921865 6.1996744,60.80771 C 21.004434,75.96923 28.628208,84.000654 28.752115,84.56605 c 0.08108,0.369972 -0.941691,7.337479 -2.272825,15.48335 -3.364633,20.58987 -3.40543,20.88229 -3.143558,22.53248 0.121535,0.76585 0.557744,2.04754 0.969354,2.8482 l 0.748381,1.45575 -7.133821,-0.006 c -6.622903,-0.005 -7.215417,-0.0424 -8.2731047,-0.52019 z"
          id="path944" />
        <path
          d="m 127.50347,58.878936 a 8.88,8.88 0 0 0 -5,-15 l -32.15,-4.91 a 2.85,2.85 0 0 1 -2.15,-1.62 l -14.18,-30.2699997 a 8.84,8.84 0 0 0 -16,0 l -14.18,30.2899997 a 2.85,2.85 0 0 1 -2.15,1.6 l -32.1499997,4.95 a 8.88,8.88 0 0 0 -5,15 l 23.6299997,24.3 a 2.9,2.9 0 0 1 0.78,2.47 l -5.53,34.000004 a 8.85,8.85 0 0 0 13,9.19 l 28.21,-15.65 a 2.81,2.81 0 0 1 2.75,0 v 0 l 28.21,15.65 a 8.85,8.85 0 0 0 13,-9.19 l -5.53,-34.000004 a 2.89,2.89 0 0 1 0.78,-2.47 z m -30.32,27.74 5.53,34.000004 a 2.82,2.82 0 0 1 -1.18,2.82 2.77,2.77 0 0 1 -3,0.16 l -28.22,-15.63 v 0 a 8.78,8.78 0 0 0 -8.57,0 l -28.21,15.63 a 2.78,2.78 0 0 1 -3,-0.16 2.82,2.82 0 0 1 -1.18,-2.82 l 5.53,-34.000004 a 8.92,8.92 0 0 0 -2.41,-7.65 l -23.6299997,-24.27 a 2.84,2.84 0 0 1 -0.66,-2.93 2.79,2.79 0 0 1 2.2699997,-1.92 l 32.15,-4.93 a 8.84,8.84 0 0 0 6.67,-5 l 14.17,-30.2999997 a 2.84,2.84 0 0 1 5.16,0 l 14.17,30.2999997 a 8.84,8.84 0 0 0 6.68,5 l 32.15,4.93 a 2.79,2.79 0 0 1 2.27,1.92 2.84,2.84 0 0 1 -0.66,2.93 l -23.64,24.27 a 8.92,8.92 0 0 0 -2.39,7.65 z"
          id="path59" />
      </svg>
      {label && <label>{label}</label>}
    </div>
  )
}

StarRating.propTypes = {
  fillPercent: PropTypes.number,
  title: PropTypes.string,
  label: PropTypes.string
}

export default StarRating
